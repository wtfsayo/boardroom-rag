# RAG API Pipeline Architecture Overview

## Introduction

This document provides an overview of the RAG (Retrieval-Augmented Generation) API Pipeline architecture. The system is designed to extract, process, and store data from the Boardroom Governance API, creating a knowledge base that can be queried using natural language processing techniques.


## Diagram

<iframe src="https://mermaid.live/view#pako:eNptVNtu4jAQ_RXLr0sDTsotWq0EKqVVoUWbfVrDg4mHJGoSR47Tli38-46TBth2I1mKz5yZMz6-vNNQSaA-jbQoYvJrus4JfmW1bYBJord7A3xNP_7IN7ISJn4V-zXdNGT7rZZ8lRSQJjmQpciTHZRmQ66ufhyYw4gGIQ9ksuCT1f1CCQn6IvUp4E8F5BgiQQFhm-Wess7UyaIOug6JIActDBxIsOSBqnQIJGt1zwnBsk7wHFIaoc2B_JzMOQ7SNnvBtXBD7iNbaaz9MOUPuXpNQUZApqK8pD9Ma3bf8Vo2FmjCkMtPNmIoAP0CGo20OvVia-AfFxeLJcdBMtyT9AKfLfks24KUSR59CT5N7hsD723ZzacWpnM-VUJLrVRG5goVc5GjWZZqF9DucMNuPeg712QHwlQaCLTKh_MyGvaHBQOHBLkoyliZL5TTlHy3Ythrg88f-Vwk4hEMWWllVKhSgpNXpZ83_82cPzbw3S2_q6LIGnErQsA1ONiCPVRftE_uLyA6-VHbzDiKhlCWl967_EYYQQK7mZe4x2dvxtqW1luWhHD2mHZoBjoTicQr9G7hNTUxZLCmPv5KoZ_XdJ0fkScqo4J9HlLf6Ao6VKsqiqm_E2mJs6qQeJpvEoEdZy2lAWcywZZOzLS-P9R_p2Zf1Dc3KQ3WD1W-SyKLVzpFODamKP1u14adKDFxtXVClXXLRMZ4FeKX8aA7cAcj4XowGHqi73ky3LLxaOdes50c9pgr6PHYoVDrL5tnon4tOrQQ-W88UG2jOLXCb9Qf9noODub1xsx12aDfoXvqMzZ0XLc3HI08d8x6Xh_L_qnzkT0aM2_keWM28K7HHjv-BWl9ZGw"
width="100%" height="700" align="center">
</iframe>

[Full Image](https://res.cloudinary.com/dwx9alovg/image/upload/v1725856208/rag-pipeline/toms0dzpmfbrmuw87xmd.png)

## Components

### 1. Pipeline Manifest

- A YAML file that defines the configuration settings and API endpoints for extraction.
- Read at the start of the pipeline process (step 1.1).

### 2. OpenAPI Spec

- A YAML file containing the OpenAPI specification for the Boardroom Governance API.
- Read by the APILoader component (step 1.2).

### 3. APILoader

- Reads the Pipeline Manifest and OpenAPI Spec.
- Generates a Source Manifest (step 2) based on the input configurations.

### 4. Source Manifest

- A YAML file generated by the APILoader.
- Contains detailed information about the data sources and extraction parameters.

### 5. Boardroom Governance API

- The primary data source for the pipeline.
- Data is extracted from this API (step 4).

### 6. Airbyte + Pathway

- Airbyte is used for data extraction and initial processing.
- Pathway is used for data transformation and pipelining.
- These components work together to process the extracted data (step 5).

### 7. RAG Pipeline

- Consists of several sub-steps:
  - Preprocessing
  - Normalization
  - Semantic chunking
  - Feature embeddings
- Processes the data extracted by Airbyte (step 5).

### 8. Qdrant Vector Store

- A vector database used to store the processed and embedded data.
- Data is stored here after processing (step 5.5).

### 9. RAG API Server

- Hosts the following components:
  - LLM (Language Model)
  - Embedding model
  - OpenAI API integration
- Interfaces with the Qdrant Vector Store to retrieve relevant information.
- Connects to the GaiaNet Protocol Network.

### 10. OpenAI API

- Used by the RAG API Server for advanced natural language processing tasks.

### 11. GaiaNet Protocol Network

- The broader network that the RAG API Server interfaces with.
- Consists of multiple Gaia Nodes.

## Process Flow

1. The pipeline starts by reading the Pipeline Manifest (1.1) and OpenAPI Spec (1.2).
2. The APILoader generates a Source Manifest based on these inputs.
3. The pipeline begins data extraction from the Boardroom Governance API.
4. Extracted data is processed through the Airbyte + Pathway components.
5. The RAG Pipeline performs preprocessing, normalization, semantic chunking, and feature embedding.
6. Processed data is stored in the Qdrant Vector Store.
7. The RAG API Server can now access this data to respond to queries.
8. The RAG API Server may use the OpenAI API for additional processing or generation tasks.
9. The RAG API Server interfaces with the GaiaNet Protocol Network to provide its services.

## Using Pre-generated snapshots and models
 - You can also use models and snapshots supported by Gaianet node by defining them in the Gaianet node config file.
 - Check out the [Gaianet docs](http://docs.gaianet.ai) for more information.
